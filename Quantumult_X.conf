// ==UserScript==
// @ConfigName        QX懒人配置文件
// @Updatetime        2023/08/11
// @Author            @offstudio71
// @TgChannel         https://t.me/sharehub_offstudio


[general]
# 服务器检查
server_check_url=http://cp.cloudflare.com/generate_204

# 服务器检查超时
server_check_timeout=3000

# 配置文件图标
profile_img_url=https://raw.githubusercontent.com/Centralmatrix3/Scripts-Rules/Master/Matrix-icon/Matrix/A-008.JPG

# 地理位置检查
geo_location_checker=http://ip-api.com/json/?lang=zh-CN, https://raw.githubusercontent.com/Centralmatrix3/Scripts-Rules/Master/QuantumultX/Scripts/IP-API.Js

# 资源解析器
resource_parser_url=https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/resource-parser.js

# 排除路线
excluded_routes=239.255.255.250/32, 24.105.30.129/32, 185.60.112.157/32, 185.60.112.158/32, 182.162.132.1/32

# DNS排除列表
dns_exclusion_list=*.cmpassport.com, *.jegotrip.com.cn, *.icitymobile.mobi, id6.me, *.pingan.com.cn, *.cmbchina.com

# UDP丢弃列表
udp_drop_list=443

[dns]
# 禁用系统DNS/IPv6
no-system
no-ipv6

# DNS over HTTP/3
# prefer-doh3

# 自定义 DNS 服务器
server=223.5.5.5
server=119.29.29.29

# 自定义 DoH 服务器
# doh-server=https://dns.alidns.com/dns-query, https://doh.pub/dns-query

[policy]
# Spotify
static=Spotify, 自动选择, 香港节点, 台湾节点, 日本节点, 狮城节点, 美国节点, 其他地区节点, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Spotify.png

# 苹果服务
static=苹果服务, direct, 自动选择, 香港节点, 台湾节点, 日本节点, 狮城节点, 美国节点, 其他地区节点, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Apple_2.png

# 国内影视
static=国内影视, direct, proxy, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/StreamingCN.png

# 国际媒体
static=国际媒体, proxy, direct, 自动选择, 香港节点, 台湾节点, 日本节点, 狮城节点, 美国节点, 其他地区节点, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/Streaming.png

# 全球加速
static=全球加速, proxy, direct, 自动选择, 香港节点, 台湾节点, 日本节点, 狮城节点, 美国节点, 其他地区节点, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/Global.png

# 黑白名单
static=黑白名单, proxy, direct, 自动选择, 香港节点, 台湾节点, 日本节点, 狮城节点, 美国节点, 其他地区节点, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/Final.png

# 自动选择
url-latency-benchmark=自动选择, server-tag-regex=^((?!(网易|网易云|网易云音乐|音乐|云音乐|官网|流量|加群|订阅|获取|刷新|鸡场|机场|订购|购买|套餐|重置|分享|网址|邀请|公众号|Netease|Music|𝐌𝐮𝐬𝐢𝐜|Unbolck|Update|music|🎵|🎶|🎧)).)*$, check-interval=600, tolerance=0, alive-checking=false, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Auto.png

# 香港节点
url-latency-benchmark=香港节点, server-tag-regex=(?=.*((?i)🇭🇰|香|港|香港|香江|香岛|湾仔|港仔|九龙|铜锣湾|旺角|HK|Hong|HongKong))^((?!(台|日|韩|新|美|英|平|邀|群|刷新|网|网易|网易云|网易云音乐|音乐|云音乐|Netease|Music|𝐌𝐮𝐬𝐢𝐜|Unbolck|Update|music|🎵|🎶|🎧)).)*$, check-interval=600, tolerance=0, alive-checking=false, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/HK.png

# 台湾节点
url-latency-benchmark=台湾节点, server-tag-regex=(?=.*((?i)🇨🇳|台|台湾|台北|新北|桃园|台中|台南|高雄|基隆|新竹|嘉义|苗栗|彰化|南投|云林|屏东|台东|花莲|宜兰|澎湖|金门|连江|TW|Taiwan))^((?!(港|日|韩|新|美|英|平|邀|群|刷新|网|网易|网易云|网易云音乐|音乐|云音乐|Netease|Music|𝐌𝐮𝐬𝐢𝐜|Unbolck|Update|music|🎵|🎶|🎧)).)*$, check-interval=600, tolerance=0, alive-checking=false, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/TW.png

# 日本节点
url-latency-benchmark=日本节点, server-tag-regex=(?=.*((?i)🇯🇵|日|日本|川日|东京|大阪|泉日|埼玉|沪日|深日|JP|Japan|名古屋|福冈|仙台|京都|Japan))^((?!(港|台|韩|新|美|英|平|邀|群|刷新|网|网易|网易云|网易云音乐|音乐|云音乐|Netease|Music|𝐌𝐮𝐬𝐢𝐜|Unbolck|Update|music|🎵|🎶|🎧)).)*$, check-interval=600, tolerance=0, alive-checking=false, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/JP.png

# 狮城节点
url-latency-benchmark=狮城节点, server-tag-regex=(?=.*((?i)🇸🇬|新|狮|獅|坡|新加坡|星|星加坡|星洲|狮城|SG|Singapore))^((?!(港|台|日|韩|美|英|平|邀|群|刷新|网|网易|网易云|网易云音乐|音乐|云音乐|Netease|Music|𝐌𝐮𝐬𝐢𝐜|Unbolck|Update|music|🎵|🎶|🎧)).)*$, check-interval=600, tolerance=0, alive-checking=false, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/SG.png

# 美国节点
url-latency-benchmark=美国节点, server-tag-regex=(?=.*((?i)🇺🇸|美|美国|美利坚合众国|波特兰|达拉斯|俄勒冈|凤凰城|费利蒙|硅谷|拉斯维加斯|洛杉矶|圣何塞|圣克拉拉|西雅图|芝加哥|华盛顿|内华达|蒙大纳|怀俄明州|菲尼克斯|阿尔伯克基|丹佛|US|United States|States|American))^((?!(港|台|日|韩|新|英|平|邀|群|刷新|网|网易|网易云|网易云音乐|音乐|云音乐|Netease|Music|𝐌𝐮𝐬𝐢𝐜|Unbolck|Update|music|🎵|🎶|🎧)).)*$, check-interval=1800, tolerance=50, alive-checking=false, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/US.png

# 其他地区节点
static=其他地区节点, server-tag-regex=^(?!.*(港|台|日|韩|坡|狮|美|HK|US|TW|JP|KR|SG|Hong|Tai|Japan|Korea|Singapore|States|网易|网易云|网易云音乐|音乐|云音乐|官网|流量|加群|订阅|获取|刷新|鸡场|机场|订购|购买|套餐|重置|分享|网址|邀请|公众号|Netease|Music|𝐌𝐮𝐬𝐢𝐜|Unbolck|Update|music|🎵|🎶|🎧)), img-url=https://raw.githubusercontent.com/fmz200/wool_scripts/main/icons/apps/infiniPort.png



[server_local]



[server_remote]
# 临时魔法
https://sub.sharecentre.online/sub, tag=临时节点①, update-interval=172800, opt-parser=true, enabled=false
https://raw.githubusercontent.com/Jsnzkpg/Jsnzkpg/Jsnzkpg/Jsnzkpg, tag=临时节点②, update-interval=172800, opt-parser=true, enabled=false



[filter_local]
# HDOBOX影视App去广告
host-suffix, applovin.com, reject
host-suffix, applvn.com, reject

# 已采用ASN数据，因此注释掉 GeoIP China，direct
;GeoIP, CN, direct

# 最终规则
FINAL, 黑白名单



[filter_remote]
# 规则修正
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Unbreak.list, tag=规则修正, force-policy=direct, update-interval=172800, opt-parser=true, enabled=true

# 广告拦截
https://raw.githubusercontent.com/privacy-protection-tools/anti-AD/master/anti-ad-quanx.txt, tag=广告拦截, force-policy=reject, update-interval=172800, opt-parser=true, enabled=true

# 运营劫持
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Hijacking/Hijacking.list, tag=运营劫持, force-policy=reject, update-interval=86400, opt-parser=true, enabled=true

# 隐私保护
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Privacy/Privacy.list, tag=隐私保护, force-policy=reject, update-interval=86400, opt-parser=true, enabled=true

# 系统更新
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/SystemOTA/SystemOTA.list, tag=系统更新, force-policy=reject, update-interval=172800, opt-parser=true, enabled=true

# 网络测速
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Speedtest/Speedtest.list, tag=网络测速, force-policy=全球加速, update-interval=172800, opt-parser=true, enabled=true

# 国际抖音
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/TikTok/TikTok.list, tag=国际抖音, force-policy=国际媒体, update-interval=172800, opt-parser=true, enabled=true

# Spotify
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Spotify/Spotify.list, tag=Spotify, force-policy=Spotify, update-interval=172800, opt-parser=true, enabled=true

# 电报消息
https://raw.githubusercontent.com/VirgilClyne/GetSomeFries/main/ruleset/ASN.Telegram.list, tag=电报消息, force-policy=自动选择, update-interval=172800, opt-parser=true, enabled=true

# ChatGPT
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/OpenAI/OpenAI.list, tag=ChatGPT, force-policy=美国节点, update-interval=172800, opt-parser=true, enabled=true

# 国际媒体
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/GlobalMedia/GlobalMedia.list, tag=国际媒体, force-policy=国际媒体, update-interval=172800, opt-parser=true, enabled=true

# 国内影视
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/ChinaMedia/ChinaMedia.list, tag=国内影视, force-policy=国内影视, update-interval=172800, opt-parser=true, enabled=true

# 全球加速
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Global/Global.list, tag=全球加速, force-policy=全球加速, update-interval=172800, opt-parser=true, enabled=true

# 苹果服务
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Apple/Apple.list, tag=苹果服务, force-policy=苹果服务, update-interval=172800, opt-parser=true, enabled=true

# 局域网络
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Lan/Lan.list, tag=局域网络, force-policy=direct, update-interval=172800, opt-parser=true, enabled=true

# 国内规则
https://raw.githubusercontent.com/VirgilClyne/GetSomeFries/main/ruleset/ASN.China.list, tag=国内规则, force-policy=direct, update-interval=172800, opt-parser=true, enabled=true



[rewrite_local]
# Google自动翻页
^https?:\/\/www\.google\..*\/search url script-response-body https://raw.githubusercontent.com/langkhach270389/Surge-LK/main/scripts/langkhach/endlessgoogle.js



[rewrite_remote]
# APP解锁合集
https://raw.githubusercontent.com/chxm1023/Rewrite/main/iTunes.js, tag=iTunes 系列解锁合集, update-interval=172800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/chxm1023/Script_X/main/Collections.conf, tag=APP解锁合集, update-interval=172800, opt-parser=false, enabled=true

# 获取Cookie合集
https://raw.githubusercontent.com/chxm1023/Rewrite/main/HQ_Cookie.conf, tag=获取Cookie合集, update-interval=-1, opt-parser=true, enabled=false
https://raw.githubusercontent.com/fmz200/wool_scripts/main/QuantumultX/rewrite/cookies.snippet, tag=获取cookie合集, update-interval=604800, opt-parser=false, enabled=false

# 去广告重写
https://github.com/ddgksf2013/Rewrite/raw/master/AdBlock/Bilibili.conf, tag=真B站去广告+解锁普通视频 1080P高码率, update-interval=172800, opt-parser=false, enabled=true
https://raw.githubusercontent.com/Maasea/sgmodule/master/YoutubeAds.sgmodule, tag=YouTube去广告, update-interval=172800, opt-parser=true, enabled=true

# 微信外部链接解锁
https://gitlab.com/lodepuly/vpn_tool/raw/main/Tool/Loon/Plugin/Weixin_external_links_unlock.plugin, tag=微信外部链接解锁, update-interval=172800, opt-parser=true, enabled=true

# TikTok换区脚本
https://raw.githubusercontent.com/chxm1023/Rewrite/main/TikTok/TikTok-JP.conf, tag=TikTok-日本, update-interval=-1, opt-parser=false, enabled=true
https://raw.githubusercontent.com/chxm1023/Rewrite/main/TikTok/TikTok-TW.conf, tag=TikTok-台湾, update-interval=-1, opt-parser=false, enabled=false
https://raw.githubusercontent.com/chxm1023/Rewrite/main/TikTok/TikTok-KR.conf, tag=TikTok-韩国, update-interval=-1, opt-parser=false, enabled=false
https://raw.githubusercontent.com/chxm1023/Rewrite/main/TikTok/TikTok-US.conf, tag=TikTok-美国, update-interval=-1, opt-parser=false, enabled=false
https://raw.githubusercontent.com/chxm1023/Rewrite/main/TikTok/TikTok-SG.conf, tag=TikTok-新加坡, update-interval=-1, opt-parser=false, enabled=false
https://raw.githubusercontent.com/chxm1023/Rewrite/main/TikTok/TikTok-RU.conf, tag=TikTok-俄罗斯, update-interval=-1, opt-parser=false, enabled=false
https://raw.githubusercontent.com/chxm1023/Rewrite/main/TikTok/TikTok-FR.conf, tag=TikTok-法国, update-interval=-1, opt-parser=false, enabled=false
https://raw.githubusercontent.com/chxm1023/Rewrite/main/TikTok/TikTok-VN.conf, tag=TikTok-越南, update-interval=-1, opt-parser=false, enabled=false
https://raw.githubusercontent.com/chxm1023/Rewrite/main/TikTok/TikTok-TH.conf, tag=TikTok-泰国, update-interval=-1, opt-parser=false, enabled=false

# Safari超级搜索
https://github.com/ddgksf2013/Rewrite/raw/master/Html/Q-Search.conf, tag=Safari超级搜索, update-interval=172800, opt-parser=false, enabled=true

# Sub-Store
https://raw.githubusercontents.com/Peng-YM/Sub-Store/master/config/QX.snippet, tag=Sub Store, update-interval=172800, opt-parser=false, enabled=true

# Boxjs
https://raw.githubusercontent.com/chavyleung/scripts/master/box/rewrite/boxjs.rewrite.quanx.conf, tag=BoxJS, update-interval=172800, opt-parser=true, enabled=true



[task_local]
# 汇率监控
10 0 * * ? https://raw.githubusercontent.com/chxm1023/Task/main/hljk.js, tag=汇率监控, img-url=https://raw.githubusercontent.com/chxm1023/Task/main/icon/hljk.png, enabled=true

# 清理Dns缓存
0 */6 * * ? https://raw.githubusercontent.com/chxm1023/Task/main/dns-clear-cache.js, tag=清理Dns缓存, img-url=https://raw.githubusercontent.com/chxm1023/Task/main/icon/clean.png, enabled=true

# Gist恢复
5 10 * * * https://raw.githubusercontent.com/dompling/Script/master/gist/restore.js, tag=Gist恢复, img-url=https://raw.githubusercontents.com/chxm1023/script/main/icon/box.png, enabled=false

# Gist备份
0 10 * * * https://raw.githubusercontent.com/dompling/Script/master/gist/backup.js, tag=Gist备份, img-url=https://raw.githubusercontents.com/chxm1023/script/main/icon/box.png, enabled=false

# 媒体解锁查询
event-interaction https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/streaming-ui-check.js, tag=媒体解锁查询, img-url=play.circle.system, enabled=true

# 策略流量查询
event-interaction https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/traffic-check.js, tag=策略流量查询, img-url=arrow.up.arrow.down.circle.system, enabled=true

# 节点信息查询
event-interaction https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/server-info-plus.js, tag=节点信息查询, img-url=tag.circle.system, enabled=true

# 谷歌送中查询
event-interaction https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/switch-check-google.js, tag=谷歌送中查询, img-url=drop.circle.system, enabled=true

# 代理链路检测
event-interaction https://raw.githubusercontent.com/I-am-R-E/Functional-Store-Hub/Master/NodeLinkCheck/Script/NodeLinkCheck.js, tag=代理链路检测, img-url=link.circle.system, enabled=true



[http_backend]
# Boxjs设置，改为使用http backend方式，访问地址改为http://127.0.0.1:9999，更新配置后请长按风车-更新，然后重启代理
https://raw.githubusercontent.com/chavyleung/scripts/master/box/chavy.boxjs.js, tag=BoxJs, path=^/, img-url=https://raw.githubusercontent.com/Orz-3/task/master/box.png, enabled=true



[mitm]
# 跳过验证证书
skip_validating_cert=false

# 强制SNI域名
force_sni_domain_name=false

# 添加主机名
hostname = -weather-data.apple.com, -*snssdk.com, -*amemv.com, -www.google.com, -buy.itunes.apple.com

# 🟢 passphrase和p12代为证书&主机名部分, 更新配置前可把旧的配置中passphrase和p12代码拷贝下来, 导入新的配置文件把内容粘贴在对应位置就不用重装证书
passphrase = 
p12 = 
